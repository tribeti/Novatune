<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="App2.Pages.SettingsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:App2.Pages"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:controls="using:CommunityToolkit.WinUI.Controls"
    xmlns:storage="using:Windows.Storage"
    xmlns:viewModels="using:App2.ViewModels"
    mc:Ignorable="d"
    Background="Transparent">

    <Page.DataContext>
        <viewModels:FolderViewModel />
    </Page.DataContext>

    <ScrollViewer Margin="36 40 36 0">
        <StackPanel Spacing="4">
            <!--#region: title-->
            <TextBlock Text="Settings" 
                       FontSize="36" 
                       Margin="0 0 0 52" 
                       Style="{StaticResource TitleTextBlockStyle}"/>

            <TextBlock Text="Local libraries" 
                       Margin="0 0 0 0" 
                       Padding="4 0 0 8"
                       Style="{StaticResource SubtitleTextBlockStyle}" Grid.Column="0"/>

            <!--#endregion-->


            <controls:SettingsExpander Header="Media folder locations"
                                       Description="List of media folders you have selected."
                                       ItemsSource="{Binding Folders}">

                <Button Content="Add a folder"
                        Style="{StaticResource AccentButtonStyle}" 
                        Command="{Binding AddFolderCommand}"/>

                <controls:SettingsExpander.HeaderIcon>
                    <FontIcon Glyph="&#xE8B7;" />
                </controls:SettingsExpander.HeaderIcon>


                <controls:SettingsExpander.ItemTemplate>
                    <DataTemplate x:DataType="storage:StorageFolder">
                        <controls:SettingsCard Description="{x:Bind Name}"
                                               Header="{x:Bind Path}">
                            <Button
                                Command="{Binding RemoveFolderCommand, Source={Binding DataContext}}"
                                Style="{StaticResource AccentButtonStyle}"
                                Grid.Column="1"
                                CommandParameter="{x:Bind}">
                                <FontIcon Glyph="&#xE74D;" FontSize="14"/>
                            </Button>
                        </controls:SettingsCard>
                    </DataTemplate>
                </controls:SettingsExpander.ItemTemplate>
            </controls:SettingsExpander>
        </StackPanel>
    </ScrollViewer>
</Page>
